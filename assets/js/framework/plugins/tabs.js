(function(){window.ext.tabs={create:function(a,b){return b!==!0?window.location.href=a:("chrome"===ext.browser&&chrome.tabs.create({url:a,active:!0}),"safari"===ext.browser?safari.application.activeBrowserWindow.openTab().url=a:void 0)},dump:function(a){return"chrome"===ext.browser&&chrome.tabs.query({},a),"safari"===ext.browser&&setTimeout(function(a){var b,c,d,e,f;for(b=[],f=safari.application.browserWindows,d=0,e=f.length;e>d;d++)c=f[d],b=b.concat(c.tabs);return a(b)},0,a),!0},indexOf:function(a,b){var c,d,e,f,g,h,i,j,k;if("chrome"===ext.browser&&chrome.tabs.query({},function(c){var d,e,f,g;for(d=[],f=0,g=c.length;g>f;f++)e=c[f],ext.regex.url(e.url,a)!==!1&&d.push(e);return b(d),!0}),"safari"===ext.browser){for(e=[],c=[],k=safari.application.browserWindows,g=0,i=k.length;i>g;g++)f=k[g],e=e.concat(f.tabs);for(h=0,j=e.length;j>h;h++)d=e[h],"undefined"!=typeof d.url&&ext.regex.url(d.url,a)!==!1&&c.push(d);b(c)}return a}}}).call(this);
